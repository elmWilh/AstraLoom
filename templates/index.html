{% extends "base.html" %}
{% block content %}
<header class="py-10">
  <nav class="flex items-center justify-between">
    <a href="#" class="font-semibold tracking-wide">MK</a>

    <div class="flex items-center gap-3">
      <a href="#projects" class="text-white/80 hover:text-white">{{ t("nav_projects") }}</a>
      <a href="#stack" class="text-white/80 hover:text-white">{{ t("nav_stack") }}</a>
      <a href="#experience" class="text-white/80 hover:text-white">{{ t("nav_experience") }}</a>
      <a href="#about" class="text-white/80 hover:text-white">{{ t("nav_about") }}</a>
      <a href="#edu" class="text-white/80 hover:text-white">{{ t("nav_edu") }}</a>
      <a href="#langs" class="text-white/80 hover:text-white">{{ t("nav_langs") }}</a>

      <!-- theme -->
      <button id="themeToggle" class="ml-2 px-3 py-1 rounded-2xl bg-white/10 hover:bg-white/20">üåó</button>

      <!-- custom language dropdown -->
      <div class="relative">
        <button id="langBtn" class="px-3 py-1 rounded-2xl bg-white/10 hover:bg-white/20 flex items-center gap-1">
          {{ current_lang|upper }} ‚ñæ
        </button>
        <div id="langMenu" class="hidden absolute right-0 mt-2 w-32 rounded-2xl bg-[#1f2026] shadow-soft ring-1 ring-white/10 overflow-hidden z-20">
          {% for l in LANGS %}
            <a href="?lang={{ l }}" class="block px-3 py-2 text-white/90 hover:bg-white/10 {% if l==current_lang %}bg-white/5{% endif %}">
              {{ l|upper }}
            </a>
          {% endfor %}
        </div>
      </div>
    </div>
  </nav>
</header>

<section class="mt-6 md:mt-12 grid md:grid-cols-[160px,1fr] gap-8 items-center">
  <div class="w-40 h-40 rounded-2xl bg-white/5 p-2 shadow-soft">
    <div class="w-full h-full rounded-2xl bg-white/10 overflow-hidden flex items-center justify-center">
      <img class="w-full h-full object-cover" src="{{ url_for('static', filename=profile.avatar_url) }}" alt="avatar">
    </div>
  </div>
  <div>
    <h1 class="text-3xl md:text-5xl font-bold leading-tight">
      {{ profile.full_name }}
    </h1>
    <p class="mt-2 text-white/80">
      {{ profile.role }} ¬∑ {{ profile.age }} {{ t("age_years") }} ¬∑ {{ profile.location }}
    </p>
    <p class="mt-4 text-lg md:text-xl text-white/90">{{ tagline }}</p>
    <div class="mt-6 flex flex-wrap gap-3">
      {% if profile.contacts.github %}<a class="chip" href="{{ profile.contacts.github }}" target="_blank" rel="noopener">GitHub</a>{% endif %}
      {% if profile.contacts.linkedin %}<a class="chip" href="{{ profile.contacts.linkedin }}" target="_blank" rel="noopener">LinkedIn</a>{% endif %}
      {% if profile.contacts.telegram %}<a class="chip" href="{{ profile.contacts.telegram }}" target="_blank" rel="noopener">Telegram</a>{% endif %}
      {% if profile.contacts.email %}<a class="chip" href="{{ profile.contacts.email }}">Email</a>{% endif %}
      {% if profile.contacts.phone %}<a class="chip" href="{{ profile.contacts.phone }}">Phone</a>{% endif %}
    </div>
  </div>
</section>

<!-- Tech stack (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏) -->
<section id="stack" class="mt-12">
  <h2 class="section-title">{{ t("title_stack") }}</h2>
  <div class="mt-4 grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for group, items in profile.stack.items() %}
      <article class="card">
        <h3 class="text-lg font-semibold">{{ group }}</h3>
        <div class="mt-3 flex flex-wrap gap-2">
          {% for it in items %}
            <span class="tag">{{ it }}</span>
          {% endfor %}
        </div>
      </article>
    {% endfor %}
  </div>

  <!-- Programming skills with progress bars -->
  <div class="mt-10 grid md:grid-cols-2 gap-6">
    <article class="card">
      <h3 class="text-lg font-semibold">Programming skills</h3>
      <div class="mt-4 space-y-3">
        {% for s in profile.skills %}
          <div>
            <div class="flex items-center justify-between text-sm text-white/80">
              <span>{{ s.name }}</span>
              <span>{{ s.label }}</span>
            </div>
            <div class="progress">
              <div class="progress__bar" style="--val: {{ s.level }}%"></div>
            </div>
          </div>
        {% endfor %}
      </div>
    </article>

    <article id="langs" class="card">
      <h3 class="text-lg font-semibold">{{ t("title_languages") }}</h3>
      <div class="mt-4 space-y-3">
        {% for l in profile.spoken_languages %}
          <div>
            <div class="flex items-center justify-between text-sm text-white/80">
              <span>{{ l.name }}</span>
              <span>{{ l.label }}</span>
            </div>
            <div class="progress progress--lang">
              <div class="progress__bar" style="--val: {{ l.level }}%"></div>
            </div>
          </div>
        {% endfor %}
      </div>
    </article>
  </div>
</section>

<section id="projects" class="mt-12">
  <h2 class="section-title">{{ t("title_projects") }}</h2>
  <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for p in projects %}
      <article class="card">
        <div class="aspect-video w-full rounded-2xl overflow-hidden bg-white/5">
          <img src="{{ url_for('static', filename=p.image) }}" alt="{{ p.title }}" class="w-full h-full object-cover">
        </div>
        <div class="mt-4">
          <h3 class="text-xl font-semibold">{{ p.title }}</h3>
          <p class="mt-2 text-white/80">{{ p.description }}</p>
          <div class="mt-3 flex flex-wrap gap-2">
            {% for ttag in p.tags %}<span class="tag">{{ ttag }}</span>{% endfor %}
          </div>
          <div class="mt-4 flex gap-3">
            {% if p.github %}<a class="btn" href="{{ p.github }}" target="_blank" rel="noopener">{{ t("btn_github") }}</a>{% endif %}
            {% if p.live %}<a class="btn btn--ghost" href="{{ p.live }}" target="_blank" rel="noopener">{{ t("btn_live") }}</a>{% endif %}
          </div>
        </div>
      </article>
    {% endfor %}
  </div>
</section>

<section id="experience" class="mt-12">
  <h2 class="section-title">{{ t("title_experience") }}</h2>
  <div class="mt-4 grid gap-4">
    {% for e in experience %}
      <article class="card">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-2">
          <div class="text-lg font-semibold">{{ e.company }} ‚Äî {{ e.role }}</div>
          <div class="text-white/70">{{ e.period }}</div>
        </div>
        <ul class="mt-3 list-disc list-inside space-y-1 text-white/90">
          {% for b in e.bullets %}<li>{{ b }}</li>{% endfor %}
        </ul>
      </article>
    {% endfor %}
  </div>
</section>

<section id="about" class="mt-12">
  <h2 class="section-title">{{ t("title_about") }}</h2>
  <div class="mt-4 p-6 rounded-2xl bg-white/5 shadow-soft leading-relaxed text-white/90">
    <p>
      –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç IT —Å –æ–ø—ã—Ç–æ–º –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–∏ Linux/Windows, –≤–µ–±-–±—ç–∫–µ–Ω–¥–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.
      –°–æ–µ–¥–∏–Ω—è—é backend, —Å–µ—Ç–∏ –∏ hardware ‚Äî –≤–Ω–µ–¥—Ä—è—é –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.
      –†–∞–±–æ—Ç–∞—é —Å —É–ø–æ—Ä–æ–º –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å; —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é —Å –∫–æ–º–∞–Ω–¥–æ–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
    </p>
  </div>
</section>

<section id="edu" class="mt-12">
  <h2 class="section-title">{{ t("title_edu") }}</h2>
  <div class="mt-4 grid gap-3">
    {% for item in education %}
      <div class="card">{{ item }}</div>
    {% endfor %}
  </div>
</section>

<!-- dropdown logic -->
<script>
  const btn = document.getElementById('langBtn');
  const menu = document.getElementById('langMenu');
  btn?.addEventListener('click', (e) => {
    e.stopPropagation();
    menu.classList.toggle('hidden');
  });
  document.addEventListener('click', () => menu?.classList.add('hidden'));
</script>
{% endblock %}
